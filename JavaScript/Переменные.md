# JavaScript

## Переменные

Переменные в JavaScript хранят значения, которыми оперирует код. Для создания переменных используются ключевые слова `var`, `let` и `const`.

![const, let, var](./../assets/images/JavaScript/const-let-var.png)

Сразу за ключевым словом идёт название переменной либо перечень переменных через запятую. Создание переменной также называют объявлением переменной. Например:

```
var singleVariable;
let firstVariable, secondVariable, thirdVariable;
```

Чаще всего, при объявлении переменной ей устанавливают стартовое значение при помощи оператора присваивания =. Тип значения может быть абсолютно любым — строка, число, объект, массив и так далее:

```
let string = 'Yay';
const array = ['Yay', 'Qeq', 'Uou'];
var number = 42;
```

### Правила именования переменных

Для имени переменной можно использовать следующие символы:

- буквы латинского алфавита;
- цифры;
- символы $ и \_.

Первый символ не должен быть цифрой:

```
let letters, $dollarsign, _underscore;

let 42number; // Выведет ошибку "SyntaxError: Invalid or unexpected token"
```

В качестве названий переменных нельзя использовать зарезервированные языком слова. Например: `class`, `super`, `throw`, `yield`, `var`, `let`, `const` и так далее.

### var

Ключевое слово `var` использовалось в JavaScript с 1995 до 2015 года для объявления переменных. В ES6 были добавлены ключевые слова `const` и `let`.

Особенности переменных, объявленных с помощью ключевого слова `var`:

- Могут быть переобъявлены и обновлены
- Имеют глобальную область видимости
- Не существуют во временной мёртвой зоне (TDZ)

```
var yay = 42; // объявление
yay = 'yay'; // обновление

if (true) {
  yay = 'qeq'; // обновление в блочной области видимости
  var isAwesome = true; // объявление в блочной области видимости
}

console.log(isAwesome); // Выведет "true" т.к. переменная имеет глобальную область видимости
console.log(yay); // Выведет "qeq"
```

Переменные `var` можно объявлять без присвоения им значения, в таком случае они будут равны `undefined`:

```
var yay;
console.log(yay); // Выведет "undefined"
```

Переменные `var` допускают повторное объявление:

```
var user = "Daria";
var user;

console.log(user); // Выведет "Daria"
```

Если дополнительно присвоить значение, то переменная примет новое значение:

```
var user = "Daria";
var user = "Dasha";

console.log(user); // Выведет "Dasha"
```

Переменные `var` обрабатываются в начале запуска функции. Другими словами, переменные `var` считаются объявленными с самого начала исполнения функции вне зависимости от того, в каком месте функции реально находятся их объявления (при условии, что они не находятся во вложенной функции).

```
function sayHi() {
  phrase = "Hello";
  console.log(phrase);
  var phrase;
}

sayHi();
```

То есть код выше будет эквивалентен коду ниже:

```
function sayHi() {
  var phrase;
  phrase = "Hello";
  console.log(phrase);
}

sayHi();
```

Это поведение называется поднятие или всплытие (`hoisting`), потому что все объявления переменных `var` «всплывают» в самый верх функции.

В прошлом, поскольку существовал только способ объявления переменных с помощью `var`, а он не имел блочной области видимости, был придуман способ её эмулировать. Этот способ получил название `Immediately-invoked function expressions` или `IIFE`:

```
(function() {
  var message = "Hello";
  console.log(message); // Выведет "Hello"
})();
```

Здесь создаётся и немедленно вызывается Function Expression. Так что код выполняется сразу же и у него есть свои локальные переменные.

## let

Особенности переменных, объявленных с помощью ключевого слова `let`:

- Могут быть изменены, но не переобъявлены
- Имеют блочную область видимости
- Существуют в TDZ

Используя ключевое слово `let`, можно объявить переменную без присвоения ей начального значения. В таком случае она будет равна `undefined`:

```
let yay;
console.log(yay); // Выведет "undefined"
```

К переменным `let` нельзя обращаться до их объявления в коде (см. TDZ):

```
console.log(yay);
// ReferenceError: Cannot access 'yay' before initialization

let yay = 42;
```

Объявление переменной с именем, которое уже используется в текущей области видимости, приведёт к ошибке:

```
let yay = "Yay";
let yay = "Qeq" // Выведет ошибку "SyntaxError: Identifier 'yay' has already been declared"
```

В то же время можно объявлять переменные с одинаковым именем в разных областях видимости. В этом случае значение будет зависеть от той области видимости, где происходит чтение:

```
let yay = "Yay";

if (true) {
  let yay = 'Qeq';
  console.log(yay); // Выведет "Qeq"
}

console.log(yay); // Выведет "Yay"
```

Значение в переменной, созданной через `let`, можно изменять:

```
let yay = "Yay";
console.log(yay); // Выведет "Yay"

yay = "Qeq";
console.log(yay); // Выведет "Qeq"
```

## const

`const` — ключевое слово языка для объявления констант. Константа — переменная, значение которой нельзя переназначить.

Особенности переменных, объявленных с помощью ключевого слова `const`:

- Не могут быть ни изменены, ни переобъявлены
- Имеют блочную область видимости
- Существуют в TDZ

При помощи `const` нельзя объявлять переменные без значения:

```
const yay; // Выведет ошибку "SyntaxError: Missing initializer in const declaration"

```

К переменным `const` нельзя обращаться до их объявления в коде (см. TDZ):

```
console.log(yay);
// ReferenceError: Cannot access 'yay' before initialization

const yay = 42;
```

Объявление переменной с именем, которое уже используется в текущей области видимости, приведёт к ошибке:

```
const yay = "Yay";
const yay = "Qeq" // Выведет ошибку "SyntaxError: Identifier 'yay' has already been declared"
```

В то же время можно объявлять переменные с одинаковым именем в разных областях видимости. В этом случае значение будет зависеть от той области видимости, где происходит чтение:

```
const yay = "Yay";

if (true) {
    const yay = 'Qeq';
    console.log(yay); // Выведет "Qeq"
}

console.log(yay); // Выведет "Yay"
```

Стартовое значение `const` изменить нельзя, будь то примитивное значение или ссылка на объект:

```
const yay = "Yay";
yay = "Qeq"; // Выведет ошибку "TypeError: invalid assignment to const 'yay'"
```

```
const obj = {
  yay: "Yay",
}

obj = {
  yay: "Qeq",
} // Выведет ошибку "TypeError: invalid assignment to const 'obj'"
```

Однако объект, хранящийся в `const`, можно мутировать. Объекты хранятся по ссылке, и изменение объекта не приводит к изменению ссылки на него:

```
const obj = {
  yay: "Yay",
}

obj.yay = "Qeq"

console.log(obj); // Выведет { yay: "Qeq" }
```

```
const arr = ["Yay", " Qeq"];
arr.push("Uou");
console.log(arr); // Выведет ["Yay"," Qeq","Uou"]
```

![let или var](./../assets/images/JavaScript/let-or-var.png)

## Источники

1. [Устаревшее ключевое слово "var"](https://learn.javascript.ru/var)
2. [ Переменные const, let и var](https://doka.guide/js/var-let/)
